:js


+2
//│ = 2

2 + +3
//│ = 5

2 + -3
//│ = -1

:w
:sjs
1
+ 2
+ 3
//│ ╔══[WARNING] Pure expression in statement position
//│ ║  l.15: 	1
//│ ╙──      	^
//│ JS (unsanitized):
//│ let tmp, tmp1; tmp = + 2; tmp1 = + 3; tmp1
//│ ╔══[WARNING] Pure expression in statement position
//│ ║  l.15: 	1
//│ ╙──      	^
//│ = 3

:w
:pe
:ge
1
* 2
* 3
//│ ╔══[PARSE ERROR] Expected end of input; found literal instead
//│ ║  l.32: 	* 2
//│ ╙──      	  ^
//│ ╔══[WARNING] Pure expression in statement position
//│ ║  l.31: 	1
//│ ╙──      	^
//│ ═══[COMPILATION ERROR] Illegal reference to builtin symbol '*'
//│ ═══[RUNTIME ERROR] Error: Illegal reference to builtin symbol '*'


:sjs
:ge
+
//│ ═══[COMPILATION ERROR] Illegal reference to builtin symbol '+'
//│ JS (unsanitized):
//│ (()=>{throw globalThis.Error("Illegal reference to builtin symbol '+'")})()

:ge
*
//│ ═══[COMPILATION ERROR] Illegal reference to builtin symbol '*'
//│ ═══[RUNTIME ERROR] Error: Illegal reference to builtin symbol '*'

:w
:pt
:ge
1
*
//│ Parsed tree:
//│ IntLit of 1
//│ Ident of "*"
//│ ╔══[WARNING] Pure expression in statement position
//│ ║  l.59: 	1
//│ ╙──      	^
//│ ═══[COMPILATION ERROR] Illegal reference to builtin symbol '*'
//│ ═══[RUNTIME ERROR] Error: Illegal reference to builtin symbol '*'


fun (??) foo(x, y) = x + y

??
//│ = [Function: foo]

(??)
//│ = [Function: foo]

??(1, 2)
//│ = 3

?? of 1, 2
//│ = 3

1 ??(2)
//│ = 3

1 ?? 2
//│ = 3

// `??` is not in the list of prefix operators...
:pe
?? 1
//│ ╔══[PARSE ERROR] Expected end of input; found literal instead
//│ ║  l.93: 	?? 1
//│ ╙──      	   ^
//│ = [Function: foo]

:w
:pe
1
?? 2
//│ ╔══[PARSE ERROR] Expected end of input; found literal instead
//│ ║  l.102: 	?? 2
//│ ╙──       	   ^
//│ ╔══[WARNING] Pure expression in statement position
//│ ║  l.101: 	1
//│ ╙──       	^
//│ = [Function: foo]

:fixme
1
  ?? 2
//│ /!!!\ Uncaught error: scala.MatchError: OpBlock(List((Ident(??),IntLit(2)))) (of class hkmc2.syntax.Tree$OpBlock)


